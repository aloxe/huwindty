---
layout: base
title: Continuous Integration
headline: Github CI pipelines
description: ''
tags: ''
author: ''
date: 2025-01-04
thumbnail: circus.jpg
ismarkdown: true
---
## Github Continuous Integration

This starter comes with 3 github pipelines that can be used for your project's continuous integration.

### Deployment to github pages

**pipeline:** pages.yml
**prerequisites**: In your repository settings, you need to set github-pages as a new environment.

The pipeline is triggered on every update of the default branch. it will deploy the static site generated by 11ty (in _site) to github pages that will make it available at https://<your_account_name>.github.io/<your_repository_name>

If you choose this solution to publish your site, remember that the `url` in the meta.json needs to be updated with `your_repository_name`. Also make sure this name is saved in the env variables as BASE_HREF.

More on Github pages: https://docs.github.com/en/pages/getting-started-with-github-pages/creating-a-github-pages-site

### Deployment to codeberg pages

**pipeline:** .woodpecker.yml
**prerequisites**: Access to woodpecker, codeberg's CI platform, with set up to access your repository and saved secrets. Your repository should also have a `pages` branch.

The pipeline is triggered on every push on the main branch. It will generate the 11ty static site and commit it to the branch `pages`. Fron there, codeberg will publish it to https://<your_account_name>.codeberg.org/<your_repository_name>

If you choose this solution to publish your site, remember that the `url` in the meta.json needs to be updated with `your_repository_name`. Also make sure this name is saved in the env variables as BASE_HREF.

#### Steps
- [apply for codeberg CI access](https://codeberg.org/Codeberg-e.V./requests/issues/new?template=ISSUE_TEMPLATE%2fWoodpecker-CI.yaml)
- [Generate an access token for your account](https://docs.codeberg.org/advanced/access-token/)
- On [ci.codeberg.org](https://ci.codeberg.org/), add a repository, click the gear and add secrets.
- [woodpecker secrets](https://woodpecker-ci.org/docs/usage/secrets)

#### More on Codeberg CI:
- [Forgejo](https://forgejo.org/docs/latest/user/)
- [Codeberg Pages](https://docs.codeberg.org/codeberg-pages/)
- [Woodpecker CI](https://woodpecker-ci.org/docs/intro)

<!-- 
also but outdate: https://web.archive.org/web/20241115042219/https://mathilde.eu.org/blog/11ty-codeberg-ci-pages/
-->

### Deployment on a standalone server

**pipeline:** test.yml
**prerequisites**: You need to set up your own web server accessible via ssh.

The pipeline is triggered on every update of the branch called `test` or manually in the apropriate github action page 'Deploy 11ty test üõ†Ô∏è'.

It will copy the static site generated by 11ty (in _site) to the server of your choice using ssh.

To do so, you will need to create an ssh key pair and copy the public key to `.ssh/authorized_keys`. You will then need to save in your repository secrets all your server details:

- HOST: the name of your server
- USERNAME: your username
- KEY: the private ssh key you just created
- PORT: the specific port used by your server ssh daemon (if you use the default, it will be 22)

You can use duplicate the `test.yml` file and set as many pipelines as you want for exemple if you have multiple environement on various servers (staging and production for example). Then you can change the `workflow_dispatch:` section, the secrets as well as the path of your html root document after `target:`.{.note}

### Accessibility pipeline

**pipeline:** axe.yml
**prerequisites**: none

The Accessibility pipeline is triggered on every pull request, it will run **Axe** on the generated site and return the number of accessibility violations found. If any violation is found, the action logs lists the broblem with explainations on the accessibility rule that is violated. Note that axe only knows the generated html so it cannot tell you which line of your code is wrong.

The current pipeline only tests the homepage accessibility.

Please note that only 20% to 50% of all accessibility issues can automatically be detected. Manual testing is always required.

### Lighthouse pipeline

**pipeline:** lighthouse.yml
**prerequisites**: none

Currently the lighthouse pipeline can only be launched manually. It returns errors that may not be fixable but may still provide useful information.

The pipeline will display the error for each test and a link to the lighthouse page that tells you what to do to fix it. If it is all green, you can merge your changes in.

The settings of lighthouse are done in `lighthouserc.js` at the root of the project. It is possible to add assertions to focus on certain aspects of lighthouse measurements or allow more flexibility.

The current project tests three pages. It is possible to add more, but be aware that adding too many pages may cause the action to time out.

More on lighthouse-ci: https://github.com/GoogleChrome/lighthouse-ci/blob/main/docs/getting-started.md

You can also chech your live site on Lighthouse [directly on pagespeed.web.dev](https://pagespeed.web.dev/)
