<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="robots" content="noindex" />
    <link rel="dns-prefetch" href="https://unpkg.com">
    <title>CMS admin sveltia CMS</title>
  </head>
  <body>
    <!--
    This index can load sveltia or decap cms, just comment or uncomment the script you want to use.
    Huwindty uses sveltia CMS but you may prefer decap cms if you want certain features that are not yet implemented in sveltia (like workflow)
    -->
    <script src="https://unpkg.com/decap-cms@^3.0.0/dist/decap-cms.js"></script>
    <!-- <script src="https://unpkg.com/@sveltia/cms/dist/sveltia-cms.js" type="module"></script> -->

    <script>
      // from https://github.com/decaporg/decap-cms/blob/main/dev-test/index.html
      CMS.registerEditorComponent({
      id: "youtube",
      label: "Youtube",
      fields: [{name: 'id', label: 'Youtube Video ID'}],
      pattern: /^{{<\s?youtube (\S+)\s?>}}/,
      fromBlock: function(match) {
        return {
          id: match[1]
        };
      },
      toBlock: function(obj) {
        return '{{< youtube ' + obj.id + ' >}}';
      },
      toPreview: function(obj) {
        return (
          '<img src="http://img.youtube.com/vi/' + obj.id + '/maxresdefault.jpg" alt="Youtube Video"/>'
        );
      }
    });




    CMS.registerEditorComponent({
      id: "test1",
      label: "Test Component 1",
      fields: [
        {
          name: 'param1', 
          label: 'Param One', 
          widget: 'string',
        },
    {
          name: 'param2', 
          label: 'Param Two', 
          widget: 'string',
        },
    {
          name: 'body',
          label: 'Section Content',
          widget: 'markdown'
        }
      ],
      pattern: /{{%[\s]*component_one[\s]*param1="(.*)"[\s]*param2="(.*)"[\s]*%}}([\S\s]*?){{%\/[\s]*component_one[\s]*%}}/,
      fromBlock: function(match) {
        return {
          param1: match[1],
          param2: match[2],
          body: match[3]
        };
      },
      toBlock: function(obj) {
        return '\n\n{{% component_one param1="' + obj.param1 + '" param2="' + obj.param2 + '" %}}\n\n' + 
          obj.body + '\n\n' +
        '{{%/ component_one %}}' + '\n\n';
      },
      toPreview: function(obj) {
        return obj.body;
      }
    });



    CMS.registerEditorComponent({
      id: "test2",
      label: "Test Component 2",
      fields: [
        {
          name: 'param1', 
          label: 'Param One', 
          widget: 'string',
        },
        {
          name: 'param2', 
          label: 'Param Two', 
          widget: 'string',
        },
        {
          name: 'body',
          label: 'Section Content',
          widget: 'markdown'
        }
      ],
      pattern: /{{%[\s]*component_two[\s]*param1="(.*)"[\s]*param2="(.*)"[\s]*%}}([\S\s]*?){{%\/[\s]*component_two[\s]*%}}/,
      fromBlock: function(match) {
        return {
          param1: match[1],
          param2: match[2],
          body: match[3]
        };
      },
      toBlock: function(obj) {
        return '\n\n{{% component_two param1="' + obj.param1 + '" param2="' + obj.param2 + '" %}}\n\n' + 
          obj.body + '\n\n' +
        '{{%/ component_two %}}' + '\n\n';
      },
      toPreview: function(obj) {
        return obj.body;
      }
    });

    </script>




  </body>
</html>
